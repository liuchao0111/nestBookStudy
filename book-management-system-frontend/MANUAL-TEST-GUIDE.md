# 手动测试指南

本文档提供了完整的手动测试步骤，用于验证图书管理系统前端的所有功能。

## 测试环境

- **前端地址**: http://localhost:5174/
- **后端地址**: http://localhost:3000/
- **浏览器**: Chrome、Firefox、Safari（建议使用最新版本）

## 测试前准备

1. 确保后端服务正在运行（端口 3000）
2. 确保前端开发服务器正在运行（端口 5174）
3. 清除浏览器缓存和 localStorage（可选，用于全新测试）

## 测试流程

### 第一部分：用户注册和登录

#### 测试 1.1：用户注册 - 成功场景

**步骤**:
1. 访问 http://localhost:5174/
2. 如果已登录，先点击"登出"按钮
3. 点击"注册"链接或访问 http://localhost:5174/register
4. 填写表单：
   - 用户名: `testuser_001`
   - 密码: `test123456`
   - 确认密码: `test123456`
5. 点击"注册"按钮

**预期结果**:
- ✅ 显示成功提示消息
- ✅ 自动跳转到登录页面

---

#### 测试 1.2：用户注册 - 密码不匹配

**步骤**:
1. 访问注册页面
2. 填写表单：
   - 用户名: `testuser_002`
   - 密码: `test123456`
   - 确认密码: `test654321`（不匹配）
3. 点击"注册"按钮

**预期结果**:
- ✅ 显示错误提示："两次输入的密码不一致"
- ✅ 表单不提交

---

#### 测试 1.3：用户注册 - 用户名为空

**步骤**:
1. 访问注册页面
2. 填写表单：
   - 用户名: （留空）
   - 密码: `test123456`
   - 确认密码: `test123456`
3. 点击"注册"按钮

**预期结果**:
- ✅ 显示错误提示："请输入用户名"
- ✅ 表单不提交

---

#### 测试 1.4：用户注册 - 密码长度不足

**步骤**:
1. 访问注册页面
2. 填写表单：
   - 用户名: `testuser_003`
   - 密码: `12345`（少于6个字符）
   - 确认密码: `12345`
3. 点击"注册"按钮

**预期结果**:
- ✅ 显示错误提示："密码至少6个字符"
- ✅ 表单不提交

---

#### 测试 1.5：用户注册 - 用户名已存在

**步骤**:
1. 访问注册页面
2. 使用已注册的用户名（如 `testuser_001`）
3. 填写密码并提交

**预期结果**:
- ✅ 显示错误提示："该用户已经注册"或类似信息
- ✅ 停留在注册页面

---

#### 测试 2.1：用户登录 - 成功场景

**步骤**:
1. 访问登录页面 http://localhost:5174/login
2. 填写表单：
   - 用户名: `testuser_001`
   - 密码: `test123456`
3. 点击"登录"按钮

**预期结果**:
- ✅ 显示成功提示消息
- ✅ 自动跳转到图书管理页面 (/books)
- ✅ 页面显示用户名和"登出"按钮

---

#### 测试 2.2：用户登录 - 用户名不存在

**步骤**:
1. 访问登录页面
2. 填写表单：
   - 用户名: `nonexistent_user`
   - 密码: `test123456`
3. 点击"登录"按钮

**预期结果**:
- ✅ 显示错误提示："该用户不存在"
- ✅ 停留在登录页面

---

#### 测试 2.3：用户登录 - 密码错误

**步骤**:
1. 访问登录页面
2. 填写表单：
   - 用户名: `testuser_001`
   - 密码: `wrongpassword`
3. 点击"登录"按钮

**预期结果**:
- ✅ 显示错误提示："密码错误"
- ✅ 停留在登录页面

---

#### 测试 2.4：用户登录 - 字段为空

**步骤**:
1. 访问登录页面
2. 用户名或密码留空
3. 点击"登录"按钮

**预期结果**:
- ✅ 显示错误提示："请输入用户名"或"请输入密码"
- ✅ 表单不提交

---

### 第二部分：路由导航和权限控制

#### 测试 3.1：根路径重定向 - 未登录

**步骤**:
1. 确保已登出
2. 访问 http://localhost:5174/

**预期结果**:
- ✅ 自动重定向到登录页面 (/login)

---

#### 测试 3.2：根路径重定向 - 已登录

**步骤**:
1. 确保已登录
2. 访问 http://localhost:5174/

**预期结果**:
- ✅ 自动重定向到图书管理页面 (/books)

---

#### 测试 3.3：未认证访问保护路由

**步骤**:
1. 确保已登出
2. 直接访问 http://localhost:5174/books

**预期结果**:
- ✅ 自动重定向到登录页面 (/login)

---

#### 测试 3.4：已认证访问登录/注册页面

**步骤**:
1. 确保已登录
2. 访问 http://localhost:5174/login 或 /register

**预期结果**:
- ✅ 自动重定向到图书管理页面 (/books)

---

### 第三部分：图书管理功能

#### 测试 4.1：查看图书列表

**步骤**:
1. 登录后访问图书管理页面
2. 观察页面内容

**预期结果**:
- ✅ 显示图书列表（如果有数据）
- ✅ 每个图书卡片显示：封面、标题、作者、描述
- ✅ 每个图书卡片有"编辑"和"删除"按钮
- ✅ 页面顶部有"添加图书"按钮
- ✅ 页面右上角有用户名和"登出"按钮

---

#### 测试 4.2：图书列表 - 空状态

**步骤**:
1. 删除所有图书（如果有）
2. 观察页面

**预期结果**:
- ✅ 显示空状态提示（如"暂无图书"）
- ✅ 显示友好的提示信息

---

#### 测试 4.3：图书列表 - 加载状态

**步骤**:
1. 刷新页面
2. 观察加载过程

**预期结果**:
- ✅ 显示加载指示器（Spin）
- ✅ 加载完成后显示图书列表

---

#### 测试 5.1：添加图书 - 成功场景

**步骤**:
1. 点击"添加图书"按钮
2. 填写表单：
   - 图书名称: `JavaScript 高级程序设计`
   - 作者: `Nicholas C. Zakas`
   - 描述: `深入理解 JavaScript 的经典著作`
3. （可选）上传封面图片
4. 点击"提交"按钮

**预期结果**:
- ✅ 显示成功提示消息
- ✅ 弹窗关闭
- ✅ 图书列表自动刷新，显示新添加的图书

---

#### 测试 5.2：添加图书 - 必填字段为空

**步骤**:
1. 点击"添加图书"按钮
2. 留空某个必填字段（如图书名称）
3. 点击"提交"按钮

**预期结果**:
- ✅ 显示验证错误："请输入图书名称"
- ✅ 表单不提交
- ✅ 弹窗保持打开

---

#### 测试 5.3：添加图书 - 字段只包含空格

**步骤**:
1. 点击"添加图书"按钮
2. 在图书名称字段输入只包含空格的内容
3. 点击"提交"按钮

**预期结果**:
- ✅ 显示验证错误："图书名称不能只包含空格"
- ✅ 表单不提交

---

#### 测试 5.4：添加图书 - 取消操作

**步骤**:
1. 点击"添加图书"按钮
2. 填写部分表单数据
3. 点击"取消"按钮或弹窗外部区域

**预期结果**:
- ✅ 弹窗关闭
- ✅ 表单数据被清空
- ✅ 图书列表不变

---

#### 测试 5.5：添加图书 - 上传封面

**步骤**:
1. 点击"添加图书"按钮
2. 点击"上传封面"按钮
3. 选择一个图片文件（PNG/JPG/JPEG）
4. 填写其他必填字段
5. 点击"提交"按钮

**预期结果**:
- ✅ 文件上传成功，显示预览
- ✅ 图书创建成功
- ✅ 图书卡片显示上传的封面

---

#### 测试 5.6：添加图书 - 上传不支持的文件类型

**步骤**:
1. 点击"添加图书"按钮
2. 尝试上传非图片文件（如 .txt, .pdf）

**预期结果**:
- ✅ 显示错误提示："只支持 PNG、JPG、JPEG 格式的图片"
- ✅ 文件不被上传

---

#### 测试 5.7：添加图书 - 上传超大文件

**步骤**:
1. 点击"添加图书"按钮
2. 尝试上传超过 10MB 的图片

**预期结果**:
- ✅ 显示错误提示："文件大小不能超过 10MB"
- ✅ 文件不被上传

---

#### 测试 6.1：编辑图书 - 成功场景

**步骤**:
1. 点击某个图书卡片的"编辑"按钮
2. 观察弹窗内容
3. 修改某些字段（如描述）
4. 点击"提交"按钮

**预期结果**:
- ✅ 弹窗打开，标题为"编辑图书"
- ✅ 表单预填充了该图书的所有信息
- ✅ 显示成功提示消息
- ✅ 弹窗关闭
- ✅ 图书列表自动刷新，显示更新后的信息

---

#### 测试 6.2：编辑图书 - 清空必填字段

**步骤**:
1. 点击"编辑"按钮
2. 清空某个必填字段（如作者）
3. 点击"提交"按钮

**预期结果**:
- ✅ 显示验证错误："请输入作者"
- ✅ 表单不提交
- ✅ 弹窗保持打开

---

#### 测试 6.3：编辑图书 - 取消操作

**步骤**:
1. 点击"编辑"按钮
2. 修改某些字段
3. 点击"取消"按钮

**预期结果**:
- ✅ 弹窗关闭
- ✅ 修改未保存
- ✅ 图书信息保持原样

---

#### 测试 7.1：删除图书 - 确认删除

**步骤**:
1. 点击某个图书卡片的"删除"按钮
2. 观察确认对话框
3. 点击"确定"按钮

**预期结果**:
- ✅ 显示确认对话框，询问是否删除
- ✅ 显示成功提示消息
- ✅ 图书从列表中移除
- ✅ 图书列表自动刷新

---

#### 测试 7.2：删除图书 - 取消删除

**步骤**:
1. 点击某个图书卡片的"删除"按钮
2. 点击"取消"按钮

**预期结果**:
- ✅ 确认对话框关闭
- ✅ 图书未被删除
- ✅ 图书列表保持不变

---

### 第四部分：用户登出

#### 测试 8.1：用户登出

**步骤**:
1. 在图书管理页面，点击"登出"按钮
2. 观察页面变化

**预期结果**:
- ✅ 自动跳转到登录页面
- ✅ localStorage 中的认证信息被清除
- ✅ 尝试访问 /books 会被重定向到登录页面

---

### 第五部分：表单验证和用户反馈

#### 测试 9.1：实时表单验证

**步骤**:
1. 在任何表单中输入无效数据
2. 将焦点移到其他字段

**预期结果**:
- ✅ 显示内联错误信息
- ✅ 错误信息清晰明确

---

#### 测试 9.2：修正错误后清除提示

**步骤**:
1. 触发表单验证错误
2. 修正输入内容

**预期结果**:
- ✅ 错误信息立即消失
- ✅ 字段状态变为正常

---

#### 测试 9.3：成功提示自动消失

**步骤**:
1. 执行任何成功操作（如添加图书）
2. 观察成功提示

**预期结果**:
- ✅ 显示成功提示消息
- ✅ 3秒后自动消失

---

#### 测试 9.4：错误提示手动关闭

**步骤**:
1. 触发一个错误（如登录失败）
2. 观察错误提示

**预期结果**:
- ✅ 显示错误提示消息
- ✅ 需要手动点击关闭按钮才能消失

---

### 第六部分：响应式设计

#### 测试 10.1：移动设备布局

**步骤**:
1. 打开浏览器开发者工具
2. 切换到移动设备视图（如 iPhone 12）
3. 浏览各个页面

**预期结果**:
- ✅ 布局适应小屏幕
- ✅ 图书列表单列显示
- ✅ 按钮和表单元素大小合适
- ✅ 弹窗宽度适应屏幕

---

#### 测试 10.2：平板设备布局

**步骤**:
1. 切换到平板视图（如 iPad）
2. 浏览各个页面

**预期结果**:
- ✅ 布局优化利用中等屏幕空间
- ✅ 图书列表双列或三列显示
- ✅ 所有元素清晰可见

---

#### 测试 10.3：桌面设备布局

**步骤**:
1. 在桌面浏览器中全屏查看
2. 浏览各个页面

**预期结果**:
- ✅ 展示完整的多列布局
- ✅ 图书列表多列显示（3-4列）
- ✅ 充分利用屏幕空间

---

#### 测试 10.4：窗口大小调整

**步骤**:
1. 在桌面浏览器中调整窗口大小
2. 从最大到最小来回调整

**预期结果**:
- ✅ 布局平滑过渡
- ✅ 没有布局错乱
- ✅ 响应式断点正确触发

---

## 测试结果记录

### 测试执行信息

- **测试日期**: _______________
- **测试人员**: _______________
- **浏览器**: _______________
- **操作系统**: _______________

### 测试结果统计

| 测试类别 | 总数 | 通过 | 失败 | 跳过 |
|---------|------|------|------|------|
| 用户注册和登录 | 9 | | | |
| 路由导航和权限控制 | 4 | | | |
| 图书管理功能 | 17 | | | |
| 用户登出 | 1 | | | |
| 表单验证和用户反馈 | 4 | | | |
| 响应式设计 | 4 | | | |
| **总计** | **39** | | | |

### 发现的问题

| 问题编号 | 测试编号 | 问题描述 | 严重程度 | 状态 |
|---------|---------|---------|---------|------|
| | | | | |

### 备注

_______________________________________________________________________________
_______________________________________________________________________________
_______________________________________________________________________________

## 测试完成标准

- ✅ 所有测试用例执行完毕
- ✅ 关键功能（注册、登录、图书管理）全部通过
- ✅ 没有阻塞性问题
- ✅ 响应式设计在主流设备上正常工作

## 已知问题

根据自动化测试结果，以下问题已知：

1. **后端缺少认证保护** - 图书 API 端点没有认证保护（严重）
2. **认证机制不安全** - 使用 username 作为 token（严重）

这些问题需要在后端修复，不影响前端功能测试。
