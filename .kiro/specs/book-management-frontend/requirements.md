# 需求文档

## 简介

本文档描述图书管理系统前端应用的功能需求。该系统为用户提供完整的身份认证流程（登录和注册）以及图书管理功能，包括查看、添加、编辑和删除图书信息。系统采用现代化的单页应用架构，提供流畅的用户体验。

## 术语表

- **系统 (System)**: 图书管理系统前端应用
- **用户 (User)**: 使用图书管理系统的任何人员
- **已认证用户 (Authenticated User)**: 已成功登录系统的用户
- **图书记录 (Book Record)**: 包含图书信息的数据实体，包括标题、作者、ISBN、出版日期等
- **弹窗 (Modal)**: 覆盖在主界面上的对话框组件
- **路由 (Route)**: 应用中的不同页面路径
- **表单验证 (Form Validation)**: 对用户输入数据进行检查和验证的过程
- **会话 (Session)**: 用户登录后保持的认证状态

## 需求

### 需求 1：用户注册

**用户故事：** 作为新用户，我想要注册一个账号，以便我可以访问图书管理系统。

#### 验收标准

1. WHEN 用户访问注册页面 THEN 系统 SHALL 显示包含用户名、密码和确认密码输入字段的注册表单
2. WHEN 用户提交注册表单且所有字段有效 THEN 系统 SHALL 创建新用户账号并跳转到登录页面
3. WHEN 用户输入的密码与确认密码不匹配 THEN 系统 SHALL 阻止表单提交并显示错误提示信息
4. WHEN 用户输入的用户名已存在 THEN 系统 SHALL 显示用户名已被占用的错误信息
5. WHEN 用户名字段为空或仅包含空白字符 THEN 系统 SHALL 阻止表单提交并显示必填字段提示
6. WHEN 密码长度小于6个字符 THEN 系统 SHALL 阻止表单提交并显示密码长度要求提示

### 需求 2：用户登录

**用户故事：** 作为已注册用户，我想要登录系统，以便我可以管理图书信息。

#### 验收标准

1. WHEN 用户访问登录页面 THEN 系统 SHALL 显示包含用户名和密码输入字段的登录表单
2. WHEN 用户提交有效的登录凭证 THEN 系统 SHALL 验证凭证、保存认证令牌并跳转到图书管理页面
3. WHEN 用户提交无效的登录凭证 THEN 系统 SHALL 显示用户名或密码错误的提示信息
4. WHEN 用户名或密码字段为空 THEN 系统 SHALL 阻止表单提交并显示必填字段提示
5. WHEN 用户成功登录 THEN 系统 SHALL 在本地存储中保存认证令牌以维持会话状态
6. WHEN 登录页面显示时 THEN 系统 SHALL 提供跳转到注册页面的链接

### 需求 3：路由导航

**用户故事：** 作为用户，我想要在不同页面之间导航，以便我可以访问登录、注册和图书管理功能。

#### 验收标准

1. WHEN 用户访问根路径 THEN 系统 SHALL 根据认证状态重定向到登录页面或图书管理页面
2. WHEN 未认证用户尝试访问图书管理页面 THEN 系统 SHALL 重定向用户到登录页面
3. WHEN 已认证用户访问登录或注册页面 THEN 系统 SHALL 重定向用户到图书管理页面
4. WHEN 用户在注册页面点击登录链接 THEN 系统 SHALL 导航到登录页面
5. WHEN 用户在登录页面点击注册链接 THEN 系统 SHALL 导航到注册页面

### 需求 4：图书列表展示

**用户故事：** 作为已认证用户，我想要查看所有图书的列表，以便我可以浏览和管理图书信息。

#### 验收标准

1. WHEN 已认证用户访问图书管理页面 THEN 系统 SHALL 从后端API获取并显示所有图书记录
2. WHEN 图书列表加载时 THEN 系统 SHALL 显示加载指示器
3. WHEN 图书列表为空 THEN 系统 SHALL 显示友好的空状态提示信息
4. WHEN 图书列表显示时 THEN 系统 SHALL 为每条图书记录展示标题、作者、ISBN和封面图片
5. WHEN 图书列表显示时 THEN 系统 SHALL 为每条图书记录提供编辑和删除操作按钮
6. WHEN API请求失败 THEN 系统 SHALL 显示错误提示信息

### 需求 5：添加新图书

**用户故事：** 作为已认证用户，我想要添加新图书，以便我可以扩充图书库。

#### 验收标准

1. WHEN 用户在图书管理页面点击添加图书按钮 THEN 系统 SHALL 打开包含空白表单的弹窗
2. WHEN 用户在添加弹窗中填写图书信息并提交 THEN 系统 SHALL 向后端API发送创建请求并刷新图书列表
3. WHEN 添加图书表单中必填字段为空 THEN 系统 SHALL 阻止表单提交并显示验证错误信息
4. WHEN 用户点击弹窗外部区域或取消按钮 THEN 系统 SHALL 关闭弹窗并清空表单数据
5. WHEN 图书添加成功 THEN 系统 SHALL 关闭弹窗、显示成功提示并更新图书列表
6. WHEN 图书添加失败 THEN 系统 SHALL 保持弹窗打开并显示错误信息

### 需求 6：编辑图书信息

**用户故事：** 作为已认证用户，我想要编辑现有图书的信息，以便我可以更新或修正图书数据。

#### 验收标准

1. WHEN 用户点击图书记录的编辑按钮 THEN 系统 SHALL 打开预填充该图书信息的编辑弹窗
2. WHEN 用户在编辑弹窗中修改图书信息并提交 THEN 系统 SHALL 向后端API发送更新请求并刷新图书列表
3. WHEN 编辑图书表单中必填字段被清空 THEN 系统 SHALL 阻止表单提交并显示验证错误信息
4. WHEN 用户点击取消按钮 THEN 系统 SHALL 关闭弹窗并放弃所有未保存的更改
5. WHEN 图书更新成功 THEN 系统 SHALL 关闭弹窗、显示成功提示并更新图书列表
6. WHEN 图书更新失败 THEN 系统 SHALL 保持弹窗打开并显示错误信息

### 需求 7：删除图书

**用户故事：** 作为已认证用户，我想要删除图书记录，以便我可以移除不需要的图书。

#### 验收标准

1. WHEN 用户点击图书记录的删除按钮 THEN 系统 SHALL 显示确认对话框
2. WHEN 用户在确认对话框中确认删除 THEN 系统 SHALL 向后端API发送删除请求并刷新图书列表
3. WHEN 用户在确认对话框中取消删除 THEN 系统 SHALL 关闭对话框并保持图书记录不变
4. WHEN 图书删除成功 THEN 系统 SHALL 从列表中移除该图书并显示成功提示
5. WHEN 图书删除失败 THEN 系统 SHALL 显示错误信息并保持图书列表不变

### 需求 8：用户登出

**用户故事：** 作为已认证用户，我想要登出系统，以便我可以安全地结束会话。

#### 验收标准

1. WHEN 已认证用户在图书管理页面点击登出按钮 THEN 系统 SHALL 清除本地存储的认证令牌
2. WHEN 用户登出 THEN 系统 SHALL 重定向用户到登录页面
3. WHEN 用户登出后 THEN 系统 SHALL 阻止用户访问需要认证的页面直到重新登录

### 需求 9：表单验证和用户反馈

**用户故事：** 作为用户，我想要获得即时的表单验证反馈，以便我可以快速修正输入错误。

#### 验收标准

1. WHEN 用户在表单字段中输入无效数据 THEN 系统 SHALL 在字段失去焦点时显示内联错误信息
2. WHEN 用户修正表单字段的错误 THEN 系统 SHALL 立即清除该字段的错误信息
3. WHEN 表单提交失败 THEN 系统 SHALL 在表单顶部显示汇总的错误信息
4. WHEN 操作成功完成 THEN 系统 SHALL 显示成功提示消息并在3秒后自动消失
5. WHEN 操作失败 THEN 系统 SHALL 显示错误提示消息直到用户手动关闭

### 需求 10：响应式设计

**用户故事：** 作为用户，我想要在不同设备上使用系统，以便我可以在手机、平板和电脑上管理图书。

#### 验收标准

1. WHEN 用户在移动设备上访问系统 THEN 系统 SHALL 调整布局以适应小屏幕尺寸
2. WHEN 用户在平板设备上访问系统 THEN 系统 SHALL 优化布局以充分利用中等屏幕空间
3. WHEN 用户在桌面设备上访问系统 THEN 系统 SHALL 展示完整的多列布局
4. WHEN 弹窗在移动设备上显示 THEN 系统 SHALL 调整弹窗尺寸以适应屏幕宽度
5. WHEN 图书列表在不同设备上显示 THEN 系统 SHALL 采用响应式网格布局自动调整列数
